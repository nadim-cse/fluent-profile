(()=>{"use strict";function e(e,t,n,o,a,l,r,i){var s,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),l&&(u._scopeId="data-v-"+l),r?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=s):a&&(s=i?function(){a.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:a),s)if(u.functional){u._injectStyles=s;var d=u.render;u.render=function(e,t){return s.call(t),d(e,t)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,s):[s]}return{exports:e,options:u}}const t=e({name:"ProfileView",data:function(){return{donorId:this.$route.query.donor_id,singleDonorData:[],loading:!1,siteUrl:FluentProfileAdmin.current_url+"?donor_id="+this.$route.query.donor_id}},watch:{"$route.query.donor_id":function(e){e&&alert(e)}},mounted:function(){this.getSingleDonor()},methods:{getSingleDonor:function(){var e=this;this.donorId&&(this.loading=!0,this.$adminGet({route:"get_single_donor_t",_wpnonce:FluentProfileAdmin.fluent_profile_admin_nonce,trxId:this.donorId}).then((function(t){e.singleDonorData=t.data.donor,e.loading=!1})).fail((function(e){console.log(e)})))},formatMoney:function(e){var t=e.payment_total/100;return parseFloat(t)%1&&(t=parseFloat(t).toFixed(2)),t+" "+e.currency},totalDonationCalc:function(e){for(var t=0,n=0;n<e.length;n++)t+=parseFloat(e[n].payment_total).toFixed(2)/100;return parseFloat(t).toFixed(2)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"crud-project-header"},[n("el-row",[[n("el-row",{staticStyle:{width:"100%"}},[n("el-skeleton",{attrs:{rows:3,loading:e.loading,animated:""}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[e._v("\n                    Donor Name:\n                    "),e.singleDonorData.length>0?n("span",[e._v(e._s(e.singleDonorData[0].payer_name)+"\n                    ")]):e._e()])]),e._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("div",{staticClass:"codetheme-social-share",staticStyle:{"text-align":"end"}},[e._v("\n                      Share this profile:\n                      "),n("ul",[n("li",[e.singleDonorData.length>0?n("a",{attrs:{rel:"nofollow noopener",target:"_blank",title:"Share by Facebook",href:"https://www.facebook.com/sharer/sharer.php?u="+e.siteUrl}},[n("i",{staticClass:"icofont icofont-facebook"})]):e._e()]),e._v(" "),n("li",[e.singleDonorData.length>0?n("a",{attrs:{rel:"nofollow noopener",target:"_blank",title:"Share by Twitter",href:"https://twitter.com/intent/tweet?text=One of the top donors: "+e.singleDonorData[0].payer_name+"&url="+e.siteUrl}},[n("i",{staticClass:"icofont-twitter"})]):e._e()]),e._v(" "),n("li",[e.singleDonorData.length>0?n("a",{attrs:{rel:"nofollow noopener",target:"_blank",title:"Share by Linkedin",href:"https://www.linkedin.com/shareArticle?mini=true&url="+e.siteUrl+"&summary=One of the top donors: "+e.singleDonorData[0].payer_name}},[n("i",{staticClass:"icofont-linkedin"})]):e._e()])])])])])],1)],1),e._v(" "),n("div",{staticClass:"text item"},[n("h4",[e._v("\n                  Total Donation: "+e._s(e.totalDonationCalc(e.singleDonorData))+"\n                ")])]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.singleDonorData}},[n("el-table-column",{attrs:{label:"Donation Amount",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.payment_total?n("span",{staticClass:"ff_payment_badge"},[e._v(e._s(e.formatMoney(t.row)))]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"donation_date",label:"Donation date",width:"200"}})],1)],1)],1)],1)]],2)],1)}),[],!1,null,null,null).exports;const n=e({name:"AllProfilesComponent",props:{donor_type:{type:String}},data:function(){return{payments:[],loading:!1,activeName:this.donor_type,donors:[],paginate:{total:0,current_page:1,last_page:1,per_page:10},SortType:"ascending",filterOptions:[{label:"Donation Amount",value:"payment_total"},{label:"Date",value:"created_at"}],filterValue:null,filterActions:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],filterActionValue:null}},methods:{getDonors:function(){var e=this;this.loading=!0;this.SortType;this.$adminGet({route:"get_donors",_wpnonce:FluentProfileAdmin.fluent_profile_admin_nonce,page:this.paginate.current_page,per_page:this.paginate.per_page,donor_type:this.activeName,afValue:this.filterValue,afActions:this.filterActionValue}).then((function(t){e.donors=t.data.donors,e.paginate.total=t.data.total,e.paginate.last_page=t.data.last_page,e.loading=!1})).fail((function(e){console.log(e)}))},formatMoney:function(e){var t=e.payment_total/100;return parseFloat(t)%1&&(t=parseFloat(t).toFixed(2)),t},shareDonorProfile:function(e){e&&(location.href=window.location+"/?donor_id="+e)},viewDonorProfile:function(e){e&&(this.singleDonorId=e,this.singleDonorDonationVisible=!0)},goToPage:function(e){this.paginate.current_page=e,this.getDonors()},handleSizeChange:function(e){this.paginate.per_page=e,this.getDonors()},totalDonationCalc:function(e){for(var t=0,n=0;n<e.length;n++)t+=parseFloat(e[n].payment_total).toFixed(2)/100;return parseFloat(t).toFixed(2)},FilterData:function(){null!=this.filterValue&&null!=this.filterActionValue&&this.getDonors(this.filterValue,this.filterActionValue)},clearFilter:function(){console.log("cleared")}},mounted:function(){this.getDonors(this.donor_type)}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("el-row",{attrs:{gutter:6}},[n("span",{staticStyle:{float:"right"}},[n("el-select",{attrs:{placeholder:"Select"},model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}},e._l(e.filterOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),n("el-select",{attrs:{placeholder:"Select"},model:{value:e.filterActionValue,callback:function(t){e.filterActionValue=t},expression:"filterActionValue"}},e._l(e.filterActions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.FilterData}},[e._v("Filter")])],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.donors,stripe:""}},[n("el-table-column",{attrs:{label:"Donation Amount",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.payment_total?n("span",{staticClass:"ff_payment_badge"},[e._v(e._s(e.formatMoney(t.row))+" "+e._s(t.row.currency))]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Donor name",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.payer_name)+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Payment Method",prop:"payment_method",width:"140"}}),e._v(" "),n("el-table-column",{attrs:{label:"Currency",prop:"currency",width:"140"}}),e._v(" "),n("el-table-column",{attrs:{label:"Date",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.donation_date)+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(n){return e.shareDonorProfile(t.row.id)}}},[n("i",{staticClass:"el-icon-view"})])]}}])})],1),e._v(" "),n("div",{staticClass:"pull-right ff_paginate"},[n("el-pagination",{attrs:{"current-page":e.paginate.current_page,"page-size":parseInt(e.paginate.per_page),"page-sizes":[1,5,10,50,100],total:e.paginate.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.paginate,"current_page",t)},"update:current-page":function(t){return e.$set(e.paginate,"current_page",t)},"size-change":e.handleSizeChange,"current-change":e.goToPage}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;var o=e({name:"LimitProfileComponent",props:{donor_type:{type:String}},data:function(){return{payments:[],loading:!1,activeName:this.donor_type,donors:[]}},methods:{getDonors:function(){var e=this;this.loading=!0,this.$adminGet({route:"get_donors",_wpnonce:FluentProfileAdmin.fluent_profile_admin_nonce,page:null,per_page:null,donor_type:this.donor_type,afValue:null,afActions:null}).then((function(t){e.donors=t.data.donors,e.loading=!1})).fail((function(e){console.log(e)}))},formatMoneyTopTen:function(e){var t=e.total_donation/100;return parseFloat(t)%1&&(t=parseFloat(t).toFixed(2)),t+" "+e.currency},shareDonorProfile:function(e){e&&(location.href=window.location+"/?donor_id="+e)},totalDonationCalc:function(e){for(var t=0,n=0;n<e.length;n++)t+=parseFloat(e[n].payment_total).toFixed(2)/100;return parseFloat(t).toFixed(2)}},mounted:function(){this.getDonors(this.donor_type)}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-main",[n("el-row",{attrs:{gutter:12}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.donors,stripe:""}},[n("el-table-column",{attrs:{label:"Donation Amount",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.total_donation?n("span",{staticClass:"ff_payment_badge"},[e._v(e._s(e.formatMoneyTopTen(t.row)))]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Donor name",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.payer_name)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"Payment Method",prop:"payment_method",width:"140"}}),e._v(" "),n("el-table-column",{attrs:{label:"Currency",prop:"currency",width:"140"}}),e._v(" "),n("el-table-column",{attrs:{label:"Date",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.donation_date)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(n){return e.shareDonorProfile(t.row.id)}}},[n("i",{staticClass:"el-icon-view"})])]}}])})],1)],1)],1)],1)],1)}),[],!1,null,null,null);var a=[{path:"*",name:"profile_view_all",component:e({name:"Dashboard",data:function(){return{payments:[],loading:!1,activeName:"all_donnors",donors:[],paginate:{total:0,current_page:1,last_page:1,per_page:10},donorType:"all_donnors",singleDonorData:[],singleDonorDonationVisible:!1,singleDonorLoading:!1,SortType:"ascending",filterOptions:[{label:"Donation Amount",value:"payment_total"},{label:"Date",value:"created_at"}],filterValue:null,filterActions:[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],filterActionValue:null,singleDonorView:!1}},components:{ProfileView:t,AllProfiles:n,LimitProfile:o.exports},watch:{"$route.query.donor_id":function(e){e||window.location.reload()}},methods:{changeTab:function(){"all_donnors"==this.activeName&&(this.donorType="all_donnors"),"top_10_donors"==this.activeName&&(this.donorType="top_10_donors")},singleViewLoad:function(){this.$route.query.donor_id&&(this.singleDonorView=!0)}},mounted:function(){this.singleViewLoad()}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.singleDonorView?n("span",[n("profile-view")],1):n("span",[e._m(0),e._v(" "),n("el-container",[n("el-row",[[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.changeTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"All Donors",name:"all_donnors"}},["all_donnors"==e.donorType?n("all-profiles",{attrs:{donor_type:e.activeName}}):e._e()],1),e._v(" "),n("el-tab-pane",{attrs:{label:"Top 10 Donors",name:"top_10_donors"}},["top_10_donors"==e.donorType?n("limit-profile",{attrs:{donor_type:e.activeName}}):e._e()],1)],1)]],2)],1)],1)}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fd-profile-header"},[n("div",{staticClass:"title"},[n("h3",[e._v("Fluent Donation Profiles")])])])}],!1,null,null,null).exports}];const l=e({name:"FrontendApp",data:function(){return{}}},(function(){var e=this.$createElement;return(this._self._c||e)("router-view")}),[],!1,null,null,null).exports;window.FluentProfileBus=new window.FluentProfile.Vue,window.FluentProfile.Vue.mixin({methods:{applyFilters:window.FluentProfile.applyFilters,addFilter:window.FluentProfile.addFilter,addAction:window.FluentProfile.addAction,doAction:window.FluentProfile.doAction,$get:window.FluentProfile.$get,$adminGet:window.FluentProfile.$adminGet,$adminPost:window.FluentProfile.$adminPost,$post:window.FluentProfile.$post}});var r=new window.FluentProfile.Router({mode:"history",base:"/",fallback:!0,routes:window.FluentProfile.applyFilters("FluentProfile_global_vue_routes",a),linkActiveClass:"active"});new window.FluentProfile.Vue({el:"#fp_frontend_appview",render:function(e){return e(l)},router:r})})();